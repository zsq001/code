#include<cstdio>
#include<algorithm>
using namespace std;
int n,m;
long long a[1000010];
long long tree[1000010];
long long mo=1000000007,ans=0;
long long dfs(long long i)
{
	if(a[i]>0)return a[i];
	return dfs(i-1)+dfs(i-2);
}
int main()
{
	int op,x,y,z,i;
	a[1]=1;a[2]=1;a[3]=2;a[4]=3;a[5]=5;a[6]=8;a[7]=13;a[8]=21;a[9]=34;a[10]=55;a[11]=89;a[12]=144;a[13]=233;a[14]=377;a[15]=610;a[16]=987;a[17]=1597;a[18]=2584;a[19]=4181;a[20]=6765;a[21]=10946;a[22]=17711;a[23]=28657;a[24]=46368;a[25]=75025;a[26]=121393;a[27]=196418;a[28]=317811;a[29]=514229;a[30]=832040;a[31]=1346269;a[32]=2178309;a[33]=3524578;a[34]=5702887;a[35]=9227465;a[36]=14930352;a[37]=24157817;a[38]=39088169;a[39]=63245986;a[40]=102334155;a[41]=165580141;a[42]=267914296;a[43]=433494437;a[44]=701408733;a[45]=134903163;a[46]=836311896;a[47]=971215059;a[48]=807526948;a[49]=778742000;a[50]=586268941;a[51]=365010934;a[52]=951279875;a[53]=316290802;a[54]=267570670;a[55]=583861472;a[56]=851432142;a[57]=435293607;a[58]=286725742;a[59]=722019349;a[60]=8745084;a[61]=730764433;a[62]=739509517;a[63]=470273943;a[64]=209783453;a[65]=680057396;a[66]=889840849;a[67]=569898238;a[68]=459739080;a[69]=29637311;a[70]=489376391;a[71]=519013702;a[72]=8390086;a[73]=527403788;a[74]=535793874;a[75]=63197655;a[76]=598991529;a[77]=662189184;a[78]=261180706;a[79]=923369890;a[80]=184550589;a[81]=107920472;a[82]=292471061;a[83]=400391533;a[84]=692862594;a[85]=93254120;a[86]=786116714;a[87]=879370834;a[88]=665487541;a[89]=544858368;a[90]=210345902;a[91]=755204270;a[92]=965550172;a[93]=720754435;a[94]=686304600;a[95]=407059028;a[96]=93363621;a[97]=500422649;a[98]=593786270;a[99]=94208912;a[100]=687995182;a[101]=782204094;a[102]=470199269;a[103]=252403356;a[104]=722602625;a[105]=975005981;a[106]=697608599;a[107]=672614573;a[108]=370223165;a[109]=42837731;a[110]=413060896;a[111]=455898627;a[112]=868959523;a[113]=324858143;a[114]=193817659;a[115]=518675802;a[116]=712493461;a[117]=231169256;a[118]=943662717;a[119]=174831966;a[120]=118494676;a[121]=293326642;a[122]=411821318;a[123]=705147960;a[124]=116969271;a[125]=822117231;a[126]=939086502;a[127]=761203726;a[128]=700290221;a[129]=461493940;a[130]=161784154;a[131]=623278094;a[132]=785062248;a[133]=408340335;a[134]=193402576;a[135]=601742911;a[136]=795145487;a[137]=396888391;a[138]=192033871;a[139]=588922262;a[140]=780956133;a[141]=369878388;a[142]=150834514;a[143]=520712902;a[144]=671547416;a[145]=192260311;a[146]=863807727;a[147]=56068031;a[148]=919875758;a[149]=975943789;a[150]=895819540;a[151]=871763322;a[152]=767582855;a[153]=639346170;a[154]=406929018;a[155]=46275181;a[156]=453204199;a[157]=499479380;a[158]=952683579;a[159]=452162952;a[160]=404846524;a[161]=857009476;a[162]=261855993;a[163]=118865462;a[164]=380721455;a[165]=499586917;a[166]=880308372;a[167]=379895282;a[168]=260203647;a[169]=640098929;a[170]=900302576;a[171]=540401498;a[172]=440704067;a[173]=981105565;a[174]=421809625;a[175]=402915183;a[176]=824724808;a[177]=227639984;a[178]=52364785;a[179]=280004769;a[180]=332369554;a[181]=612374323;a[182]=944743877;a[183]=557118193;a[184]=501862063;a[185]=58980249;a[186]=560842312;a[187]=619822561;a[188]=180664866;a[189]=800487427;a[190]=981152293;a[191]=781639713;a[192]=762791999;a[193]=544431705;a[194]=307223697;a[195]=851655402;a[196]=158879092;a[197]=10534487;a[198]=169413579;a[199]=179948066;a[200]=349361645;a[201]=529309711;a[202]=878671356;a[203]=407981060;a[204]=286652409;a[205]=694633469;a[206]=981285878;a[207]=675919340;a[208]=657205211;a[209]=333124544;a[210]=990329755;a[211]=323454292;a[212]=313784040;a[213]=637238332;a[214]=951022372;a[215]=588260697;a[216]=539283062;a[217]=127543752;a[218]=666826814;a[219]=794370566;a[220]=461197373;a[221]=255567932;a[222]=716765305;a[223]=972333237;a[224]=689098535;a[225]=661431765;a[226]=350530293;a[227]=11962051;a[228]=362492344;a[229]=374454395;a[230]=736946739;a[231]=111401127;a[232]=848347866;a[233]=959748993;a[234]=808096852;a[235]=767845838;a[236]=575942683;a[237]=343788514;a[238]=919731197;a[239]=263519704;a[240]=183250894;a[241]=446770598;a[242]=630021492;a[243]=76792083;a[244]=706813575;a[245]=783605658;a[246]=490419226;a[247]=274024877;a[248]=764444103;a[249]=38468973;a[250]=802913076;a[251]=841382049;a[252]=644295118;a[253]=485677160;a[254]=129972271;a[255]=615649431;a[256]=745621702;a[257]=361271126;a[258]=106892821;a[259]=468163947;a[260]=575056768;a[261]=43220708;a[262]=618277476;a[263]=661498184;a[264]=279775653;a[265]=941273837;a[266]=221049483;a[267]=162323313;a[268]=383372796;a[269]=545696109;a[270]=929068905;a[271]=474765007;a[272]=403833905;a[273]=878598912;a[274]=282432810;a[275]=161031715;a[276]=443464525;a[277]=604496240;a[278]=47960758;a[279]=652456998;a[280]=700417756;a[281]=352874747;a[282]=53292496;a[283]=406167243;a[284]=459459739;a[285]=865626982;a[286]=325086714;a[287]=190713689;a[288]=515800403;a[289]=706514092;a[290]=222314488;a[291]=928828580;a[292]=151143061;a[293]=79971634;a[294]=231114695;a[295]=311086329;a[296]=542201024;a[297]=853287353;a[298]=395488370;a[299]=248775716;a[300]=644264086;a[301]=893039802;a[302]=537303881;a[303]=430343676;a[304]=967647557;a[305]=397991226;a[306]=365638776;a[307]=763630002;a[308]=129268771;a[309]=892898773;a[310]=22167537;a[311]=915066310;a[312]=937233847;a[313]=852300150;a[314]=789533990;a[315]=641834133;a[316]=431368116;a[317]=73202242;a[318]=504570358;a[319]=577772600;a[320]=82342951;a[321]=660115551;a[322]=742458502;a[323]=402574046;a[324]=145032541;a[325]=547606587;a[326]=692639128;a[327]=240245708;a[328]=932884836;a[329]=173130537;a[330]=106015366;a[331]=279145903;a[332]=385161269;a[333]=664307172;a[334]=49468434;a[335]=713775606;a[336]=763244040;a[337]=477019639;a[338]=240263672;a[339]=717283311;a[340]=957546983;a[341]=674830287;a[342]=632377263;a[343]=307207543;a[344]=939584806;a[345]=246792342;a[346]=186377141;a[347]=433169483;a[348]=619546624;a[349]=52716100;a[350]=672262724;a[351]=724978824;a[352]=397241541;a[353]=122220358;a[354]=519461899;a[355]=641682257;a[356]=161144149;a[357]=802826406;a[358]=963970555;a[359]=766796954;a[360]=730767502;a[361]=497564449;a[362]=228331944;a[363]=725896393;a[364]=954228337;a[365]=680124723;a[366]=634353053;a[367]=314477769;a[368]=948830822;a[369]=263308584;a[370]=212139399;a[371]=475447983;a[372]=687587382;a[373]=163035358;a[374]=850622740;a[375]=13658091;a[376]=864280831;a[377]=877938922;a[378]=742219746;a[379]=620158661;a[380]=362378400;a[381]=982537061;a[382]=344915454;a[383]=327452508;a[384]=672367962;a[385]=999820470;a[386]=672188425;a[387]=672008888;a[388]=344197306;a[389]=16206187;a[390]=360403493;a[391]=376609680;a[392]=737013173;a[393]=113622846;a[394]=850636019;a[395]=964258865;a[396]=814894877;a[397]=779153735;a[398]=594048605;a[399]=373202333;a[400]=967250938;a[401]=340453264;a[402]=307704195;a[403]=648157459;a[404]=955861654;a[405]=604019106;a[406]=559880753;a[407]=163899852;a[408]=723780605;a[409]=887680457;a[410]=611461055;a[411]=499141505;a[412]=110602553;a[413]=609744058;a[414]=720346611;a[415]=330090662;a[416]=50437266;a[417]=380527928;a[418]=430965194;a[419]=811493122;a[420]=242458309;a[421]=53951424;a[422]=296409733;a[423]=350361157;a[424]=646770890;a[425]=997132047;a[426]=643902930;a[427]=641034970;a[428]=284937893;a[429]=925972863;a[430]=210910749;a[431]=136883605;a[432]=347794354;a[433]=484677959;a[434]=832472313;a[435]=317150265;a[436]=149622571;a[437]=466772836;a[438]=616395407;a[439]=83168236;a[440]=699563643;a[441]=782731879;a[442]=482295515;a[443]=265027387;a[444]=747322902;a[445]=12350282;a[446]=759673184;a[447]=772023466;a[448]=531696643;a[449]=303720102;a[450]=835416745;a[451]=139136840;a[452]=974553585;a[453]=113690418;a[454]=88243996;a[455]=201934414;a[456]=290178410;a[457]=492112824;a[458]=782291234;a[459]=274404051;a[460]=56695278;a[461]=331099329;a[462]=387794607;a[463]=718893936;a[464]=106688536;a[465]=825582472;a[466]=932271008;a[467]=757853473;a[468]=690124474;a[469]=447977940;a[470]=138102407;a[471]=586080347;a[472]=724182754;a[473]=310263094;a[474]=34445841;a[475]=344708935;a[476]=379154776;a[477]=723863711;a[478]=103018480;a[479]=826882191;a[480]=929900671;a[481]=756782855;a[482]=686683519;a[483]=443466367;a[484]=130149879;a[485]=573616246;a[486]=703766125;a[487]=277382364;a[488]=981148489;a[489]=258530846;a[490]=239679328;a[491]=498210174;a[492]=737889502;a[493]=236099669;a[494]=973989171;a[495]=210088833;a[496]=184077997;a[497]=394166830;a[498]=578244827;a[499]=972411657;a[500]=550656477;a[501]=523068127;a[502]=73724597;a[503]=596792724;a[504]=670517321;a[505]=267310038;a[506]=937827359;a[507]=205137390;a[508]=142964742;a[509]=348102132;a[510]=491066874;a[511]=839169006;a[512]=330235873;a[513]=169404872;a[514]=499640745;a[515]=669045617;a[516]=168686355;a[517]=837731972;a[518]=6418320;a[519]=844150292;a[520]=850568612;a[521]=694718897;a[522]=545287502;a[523]=240006392;a[524]=785293894;a[525]=25300279;a[526]=810594173;a[527]=835894452;a[528]=646488618;a[529]=482383063;a[530]=128871674;a[531]=611254737;a[532]=740126411;a[533]=351381141;a[534]=91507545;a[535]=442888686;a[536]=534396231;a[537]=977284917;a[538]=511681141;a[539]=488966051;a[540]=647185;a[541]=489613236;a[542]=490260421;a[543]=979873657;a[544]=470134071;a[545]=450007721;a[546]=920141792;a[547]=370149506;a[548]=290291291;a[549]=660440797;a[550]=950732088;a[551]=611172878;a[552]=561904959;a[553]=173077830;a[554]=734982789;a[555]=908060619;a[556]=643043401;a[557]=551104013;a[558]=194147407;a[559]=745251420;a[560]=939398827;a[561]=684650240;a[562]=624049060;a[563]=308699293;a[564]=932748353;a[565]=241447639;a[566]=174195985;a[567]=415643624;a[568]=589839609;a[569]=5483226;a[570]=595322835;a[571]=600806061;a[572]=196128889;a[573]=796934950;a[574]=993063839;a[575]=789998782;a[576]=783062614;a[577]=573061389;a[578]=356123996;a[579]=929185385;a[580]=285309374;a[581]=214494752;a[582]=499804126;a[583]=714298878;a[584]=214102997;a[585]=928401875;a[586]=142504865;a[587]=70906733;a[588]=213411598;a[589]=284318331;a[590]=497729929;a[591]=782048260;a[592]=279778182;a[593]=61826435;a[594]=341604617;a[595]=403431052;a[596]=745035669;a[597]=148466714;a[598]=893502383;a[599]=41969090;a[600]=935471473;a[601]=977440563;a[602]=912912029;a[603]=890352585;a[604]=803264607;a[605]=693617185;a[606]=496881785;a[607]=190498963;a[608]=687380748;a[609]=877879711;a[610]=565260452;a[611]=443140156;a[612]=8400601;a[613]=451540757;a[614]=459941358;a[615]=911482115;a[616]=371423466;a[617]=282905574;a[618]=654329040;a[619]=937234614;a[620]=591563647;a[621]=528798254;a[622]=120361894;a[623]=649160148;a[624]=769522042;a[625]=418682183;a[626]=188204218;a[627]=606886401;a[628]=795090619;a[629]=401977013;a[630]=197067625;a[631]=599044638;a[632]=796112263;a[633]=395156894;a[634]=191269150;a[635]=586426044;a[636]=777695194;a[637]=364121231;a[638]=141816418;a[639]=505937649;a[640]=647754067;a[641]=153691709;a[642]=801445776;a[643]=955137485;a[644]=756583254;a[645]=711720732;a[646]=468303979;a[647]=180024704;a[648]=648328683;a[649]=828353387;a[650]=476682063;a[651]=305035443;a[652]=781717506;a[653]=86752942;a[654]=868470448;a[655]=955223390;a[656]=823693831;a[657]=778917214;a[658]=602611038;a[659]=381528245;a[660]=984139283;a[661]=365667521;a[662]=349806797;a[663]=715474318;a[664]=65281108;a[665]=780755426;a[666]=846036534;a[667]=626791953;a[668]=472828480;a[669]=99620426;a[670]=572448906;a[671]=672069332;a[672]=244518231;a[673]=916587563;a[674]=161105787;a[675]=77693343;a[676]=238799130;a[677]=316492473;a[678]=555291603;a[679]=871784076;a[680]=427075672;a[681]=298859741;a[682]=725935413;a[683]=24795147;a[684]=750730560;a[685]=775525707;a[686]=526256260;a[687]=301781960;a[688]=828038220;a[689]=129820173;a[690]=957858393;a[691]=87678559;a[692]=45536945;a[693]=133215504;a[694]=178752449;a[695]=311967953;a[696]=490720402;a[697]=802688355;a[698]=293408750;a[699]=96097098;a[700]=389505848;a[701]=485602946;a[702]=875108794;a[703]=360711733;a[704]=235820520;a[705]=596532253;a[706]=832352773;a[707]=428885019;a[708]=261237785;a[709]=690122804;a[710]=951360589;a[711]=641483386;a[712]=592843968;a[713]=234327347;a[714]=827171315;a[715]=61498655;a[716]=888669970;a[717]=950168625;a[718]=838838588;a[719]=789007206;a[720]=627845787;a[721]=416852986;a[722]=44698766;a[723]=461551752;a[724]=506250518;a[725]=967802270;a[726]=474052781;a[727]=441855044;a[728]=915907825;a[729]=357762862;a[730]=273670680;a[731]=631433542;a[732]=905104222;a[733]=536537757;a[734]=441641972;a[735]=978179729;a[736]=419821694;a[737]=398001416;a[738]=817823110;a[739]=215824519;a[740]=33647622;a[741]=249472141;a[742]=283119763;a[743]=532591904;a[744]=815711667;a[745]=348303564;a[746]=164015224;a[747]=512318788;a[748]=676334012;a[749]=188652793;a[750]=864986805;a[751]=53639591;a[752]=918626396;a[753]=972265987;a[754]=890892376;a[755]=863158356;a[756]=754050725;a[757]=617209074;a[758]=371259792;a[759]=988468866;a[760]=359728651;a[761]=348197510;a[762]=707926161;a[763]=56123664;a[764]=764049825;a[765]=820173489;a[766]=584223307;a[767]=404396789;a[768]=988620096;a[769]=393016878;a[770]=381636967;a[771]=774653845;a[772]=156290805;a[773]=930944650;a[774]=87235448;a[775]=18180091;a[776]=105415539;a[777]=123595630;a[778]=229011169;a[779]=352606799;a[780]=581617968;a[781]=934224767;a[782]=515842728;a[783]=450067488;a[784]=965910216;a[785]=415977697;a[786]=381887906;a[787]=797865603;a[788]=179753502;a[789]=977619105;a[790]=157372600;a[791]=134991698;a[792]=292364298;a[793]=427355996;a[794]=719720294;a[795]=147076283;a[796]=866796577;a[797]=13872853;a[798]=880669430;a[799]=894542283;a[800]=775211706;a[801]=669753982;a[802]=444965681;a[803]=114719656;a[804]=559685337;a[805]=674404993;a[806]=234090323;a[807]=908495316;a[808]=142585632;a[809]=51080941;a[810]=193666573;a[811]=244747514;a[812]=438414087;a[813]=683161601;a[814]=121575681;a[815]=804737282;a[816]=926312963;a[817]=731050238;a[818]=657363194;a[819]=388413425;a[820]=45776612;a[821]=434190037;a[822]=479966649;a[823]=914156686;a[824]=394123328;a[825]=308280007;a[826]=702403335;a[827]=10683335;a[828]=713086670;a[829]=723770005;a[830]=436856668;a[831]=160626666;a[832]=597483334;a[833]=758110000;a[834]=355593327;a[835]=113703320;a[836]=469296647;a[837]=582999967;a[838]=52296607;a[839]=635296574;a[840]=687593181;a[841]=322889748;a[842]=10482922;a[843]=333372670;a[844]=343855592;a[845]=677228262;a[846]=21083847;a[847]=698312109;a[848]=719395956;a[849]=417708058;a[850]=137104007;a[851]=554812065;a[852]=691916072;a[853]=246728130;a[854]=938644202;a[855]=185372325;a[856]=124016520;a[857]=309388845;a[858]=433405365;a[859]=742794210;a[860]=176199568;a[861]=918993778;a[862]=95193339;a[863]=14187110;a[864]=109380449;a[865]=123567559;a[866]=232948008;a[867]=356515567;a[868]=589463575;a[869]=945979142;a[870]=535442710;a[871]=481421845;a[872]=16864548;a[873]=498286393;a[874]=515150941;a[875]=13437327;a[876]=528588268;a[877]=542025595;a[878]=70613856;a[879]=612639451;a[880]=683253307;a[881]=295892751;a[882]=979146058;a[883]=275038802;a[884]=254184853;a[885]=529223655;a[886]=783408508;a[887]=312632156;a[888]=96040657;a[889]=408672813;a[890]=504713470;a[891]=913386283;a[892]=418099746;a[893]=331486022;a[894]=749585768;a[895]=81071783;a[896]=830657551;a[897]=911729334;a[898]=742386878;a[899]=654116205;a[900]=396503076;a[901]=50619274;a[902]=447122350;a[903]=497741624;a[904]=944863974;a[905]=442605591;a[906]=387469558;a[907]=830075149;a[908]=217544700;a[909]=47619842;a[910]=265164542;a[911]=312784384;a[912]=577948926;a[913]=890733310;a[914]=468682229;a[915]=359415532;a[916]=828097761;a[917]=187513286;a[918]=15611040;a[919]=203124326;a[920]=218735366;a[921]=421859692;a[922]=640595058;a[923]=62454743;a[924]=703049801;a[925]=765504544;a[926]=468554338;a[927]=234058875;a[928]=702613213;a[929]=936672088;a[930]=639285294;a[931]=575957375;a[932]=215242662;a[933]=791200037;a[934]=6442692;a[935]=797642729;a[936]=804085421;a[937]=601728143;a[938]=405813557;a[939]=7541693;a[940]=413355250;a[941]=420896943;a[942]=834252193;a[943]=255149129;a[944]=89401315;a[945]=344550444;a[946]=433951759;a[947]=778502203;a[948]=212453955;a[949]=990956158;a[950]=203410106;a[951]=194366257;a[952]=397776363;a[953]=592142620;a[954]=989918983;a[955]=582061596;a[956]=571980572;a[957]=154042161;a[958]=726022733;a[959]=880064894;a[960]=606087620;a[961]=486152507;a[962]=92240120;a[963]=578392627;a[964]=670632747;a[965]=249025367;a[966]=919658114;a[967]=168683474;a[968]=88341581;a[969]=257025055;a[970]=345366636;a[971]=602391691;a[972]=947758327;a[973]=550150011;a[974]=497908331;a[975]=48058335;a[976]=545966666;a[977]=594025001;a[978]=139991660;a[979]=734016661;a[980]=874008321;a[981]=608024975;a[982]=482033289;a[983]=90058257;a[984]=572091546;a[985]=662149803;a[986]=234241342;a[987]=896391145;a[988]=130632480;a[989]=27023618;a[990]=157656098;a[991]=184679716;a[992]=342335814;a[993]=527015530;a[994]=869351344;a[995]=396366867;a[996]=265718204;a[997]=662085071;a[998]=927803275;a[999]=589888339;a[1000]=517691607;
	freopen("sum.in","r",stdin);
	freopen("sum.out","w",stdout);
	scanf("%d%d",&n,&m);
	if(n>1000)
	{
		for(i=1000;i<=n;i++)
		{
			a[i]=dfs(i)%mo;
		}
	}
	for(i=1;i<=n;i++)
	{
		scanf("%lld",&tree[i]);
	}
	while(m--)
	{
		scanf("%d",&op);
		if(op==1){
			scanf("%d%d%d",&x,&y,&z);
			for(i=x;i<=y;i++)
			{
				tree[i]+=z;
			}
		}
		else {
			scanf("%d%d",&x,&y);
			ans=0;
			for(i=x;i<=y;i++)
			{
				if(ans>1000000007){
					ans=ans%mo;
				}
				ans+=a[tree[i]];	
			}
			printf("%lld\n",ans);
//			printf("%lld\n",query(1,1,n,x,y));
		}
	}
	fclose(stdin);
	fclose(stdout);
	return 0;
}
