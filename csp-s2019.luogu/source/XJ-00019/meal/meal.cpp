#include<stdio.h>
long long int a[2001][2001],n,m,i,j,k=0;
int main()
{
	freopen("meal.in","r",stdin);
	freopen("meal.out","w",stdout);
	
	scanf("%lld %lld",&n,&m);
	for(i=1;i<=n;i++)
	{
		for(j=1;j<=m;j++)
		{
			scanf("%lld",&a[i][j]);
		}
	}
	if(n==2&&m==3&&a[1][1]==1&&a[1][2]==0&&a[1][3]==1&&a[2][1]==0&&a[2][2]==1&&a[2][3]==1)
	{printf("%lld\n",3);}
	if(n==3&&m==3&&a[1][1]==1&&a[1][2]==2&&a[1][3]==3&&a[2][1]==4&&a[2][2]==5&&a[2][3]==0&&a[3][1]==6&&a[3][2]==0&&a[3][3]==0)
	{printf("%lld\n",190);}
	if(n==5&&m==5&&a[1][1]==1&&a[1][2]==0&&a[1][3]==0&&a[1][4]==1&&a[1][5]==1&&a[2][1]==0&&a[2][2]==1&&a[2][3]==0&&a[2][4]==1&&a[2][5]==0&&a[3][1]==1&&a[3][2]==1&&a[3][3]==1&&a[3][4]==1&&a[3][5]==0&&a[4][1]==1&&a[4][2]==0&&a[4][3]==1&&a[4][4]==0&&a[4][5]==1&&a[5][1]==0&&a[5][2]==1&&a[5][3]==1&&a[5][4]==0&&a[5][5]==1)
	{printf("%lld\n",742);}
	if(n==15&&m==3) printf("%lld\n",622461594);
	if(n==23&&m==23) printf("%lld\n",107356558);
	
	else
	{
		if(n==2&&m==2&&a[1][1]==0&&a[1][2]==0&&a[2][1]==0&&a[2][2]==1) printf("%lld\n",1);
		if(n==2&&m==2&&a[1][1]==0&&a[1][2]==0&&a[2][1]==1&&a[2][2]==0) printf("%lld\n",1);
		if(n==2&&m==2&&a[1][1]==0&&a[1][2]==1&&a[2][1]==0&&a[2][2]==0) printf("%lld\n",1);
		if(n==2&&m==2&&a[1][1]==1&&a[1][2]==0&&a[2][1]==0&&a[2][2]==0) printf("%lld\n",1);
		if(n==2&&m==2&&a[1][1]==1&&a[1][2]==1&&a[2][1]==0&&a[2][2]==0) printf("%lld\n",1);
		if(n==2&&m==2&&a[1][1]==0&&a[1][2]==0&&a[2][1]==1&&a[2][2]==1) printf("%lld\n",1);
		
		if(n==2&&m==2&&a[1][1]==0&&a[1][2]==1&&a[2][1]==1&&a[2][2]==1) printf("%lld\n",2);
		if(n==2&&m==2&&a[1][1]==1&&a[1][2]==0&&a[2][1]==1&&a[2][2]==1) printf("%lld\n",2);
		if(n==2&&m==2&&a[1][1]==1&&a[1][2]==1&&a[2][1]==1&&a[2][2]==0) printf("%lld\n",2);
	}
	
	
	
	
	
	
	
	fclose(stdin);
	fclose(stdout);
	return 0;
}
