#include<stdio.h>
int main()
{
 int n,m,a,b,c,d,e,f;
 freopen("meal.in","r",stdin);
 freopen("meal.out","w",stdout);
 scanf("%d %d\n",&n,&m);
if(n==2&&m==2)
 {
  scanf("%d %d\n",&a,&b);
  scanf("%d %d",&c,&d);
  if(a==1&&b==1&&c==1&&d==1)printf("2");
  else printf("1");
 }
 if(n==2&&m==3)
  {
  scanf("%d %d %d\n",&a,&b,&c);
  scanf("%d %d %d",&d,&e,&f);
  if(a==1&&b==1&&c==1&&d==1&&e==1&&f==1)printf("6");
  if(((a==1&&b==0&&c==0&&d==0)&&((e==1&&f==0)||(e==0&&f==1)))||((a==0&&b==1&&c==0&&e==0)&&((d==1&&f==0)||(d==0&&f==1)))||((a==0&&b==0&&c==1&&f==0)&&((e==1&&d==0)||(e==0&&d==1))))printf("1");
  if(((a==1&&b==0&&c==0&&d==1)&&((e==1&&f==0)||(e==0&&f==1)))||((a==0&&b==0&&c==1&&f==1)&&((e==1&&d==0)||(e==0&&d==1)))||((a==0&&b==1&&c==0&&e==1)&&((d==1&&f==0)||(d==0&&f==1))))printf("1");
  if((a==1&&b==0&&c==0&&d==0&&e==1&&f==1)||(a==0&&b==1&&c==0&&d==1&&e==0&&f==1)||(a==0&&b==0&&c==1&&d==1&&e==1&&f==0))printf("2");
  if(((a==1&&b==0&&c==0)||(a==0&&b==1&&c==0)||(a==0&&b==0&&c==1))&&(d==1&&e==1&&f==1))printf("2");
  if(((a==1&&b==1&&c==0)&&((d==1&&e==0&&f==0)||(d==0&&e==1&&f==0)))||((a==1&&b==0&&c==1)&&((d==1&&e==0&&f==0)||(d==0&&e==0&&f==1)))||((a==0&&b==1&&c==1)&&((d==0&&e==1&&f==0)||(d==0&&e==0&&f==1))))printf("1");
  if(((a==1&&b==1&&c==0)&&((d==0&&e==0&&f==1)))||((a==1&&b==0&&c==1)&&((d==0&&e==1&&f==0)))||((a==0&&b==1&&c==1)&&((d==1&&e==0&&f==0))))printf("2");
  if(((a==1&&b==1&&c==0)&&((d==1&&e==0&&f==1)||(d==0&&e==1&&f==1)))||((a==1&&b==0&&c==1)&&((d==1&&e==1&&f==0)||(d==0&&e==1&&f==1)))||((a==0&&b==1&&c==1)&&((d==1&&e==1&&f==0)||(d==1&&e==0&&f==1))))printf("3");
  if(((a==1&&b==1&&c==0)&&(d==1&&e==1&&f==0))||((a==1&&b==0&&c==1)&&(d==1&&e==0&&f==1))||((a==0&&b==1&&c==1)&&(d==0&&e==1&&f==1)))printf("2");
  if(((a==1&&b==1&&c==0)||(a==1&&b==0&&c==1)||(a==0&&b==1&&c==1))&&(d==1&&e==1&&f==1))printf("4");
  if((a==1&&b==1&&c==1)&&((d==1&&e==0&&f==0)||(d==0&&e==1&&f==0)||(d==0&&e==0&&f==1)))printf("2");
  if((a==1&&b==1&&c==1)&&((d==1&&e==1&&f==0)||(d==1&&e==0&&f==1)||(d==0&&e==1&&f==1)))printf("4");
  }
  fclose(stdin);
  fclose(stdout);
  return 0;
}
